<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta content="yes" name="apple-touch-fullscreen" />
    <meta content="telephone=no,email=no" name="format-detection" />
    <script src="../build/flexible_css.debug.js"></script>
    <script src="../build/flexible.debug.js"></script>
    <link rel="stylesheet" href="../css/mobile_da.css" />
    <title>分答</title>
</head>
<body>
   <div class="topTile">
       <a href="javascript:history.back()" class="return"></a>
       <p>我的回答</p>
   </div>

   <div class="dalist">
      <ul id="myul">
          <!--<li>-->
              <!--<p class="pram">上证指数减肥税务局负责 等废弃物王妃王妃王妃务局负责 等废弃物王妃王妃王妃 务局负责 等废弃物王v妃王妃王妃 务局负责 等废</p>-->
              <!--<div class="personInfo">-->
                <!--<a href="#" class="img"><img src="../images/peo.png" /></a>-->
                <!--<div class="des">-->
                    <!--<h3>唐老师</h3>-->
                    <!--<p class="identity">巅峰财富|策略分析师</p>-->
                    <!--<div class="status">-->
                       <!--<span class="play"><i></i>点击播放</span> 14 ''-->
                    <!--</div>-->
                    <!--<p class="time">15分钟前</p>-->
                <!--</div>-->
              <!--</div>-->
          <!--</li>-->

          <!--<li>-->
              <!--<div class="personInfo">-->
                <!--<a href="#" class="img"><img src="../images/peo.png" /></a>-->
                <!--<div class="des">-->
                    <!--<h3>唐老师</h3>-->
                    <!--<p class="identity"><span class="state">待回答</span>巅峰财富|策略分析师</p>-->
                    <!--<p class="pram">上证指数减肥税务局负责 等废弃物王妃王妃王妃务局负责 等废弃物王妃王妃王妃 务局负责 等废弃物王v妃王妃王妃 务局负责 等废</p>-->
                    <!--<p class="time">15分钟前</p>-->
                <!--</div>-->
              <!--</div>-->
          <!--</li>-->
          <!---->
         <!--<li>-->
              <!--<div class="personInfo">-->
                <!--<a href="#" class="img"><img src="../images/peo.png" /></a>-->
                <!--<div class="des">-->
                    <!--<h3>唐老师</h3>-->
                    <!--<p class="identity"><span class="state overstate">已过期</span>巅峰财富|策略分析师</p>-->
                    <!--<p class="pram">上证指数减肥税务局负责 等废弃物王妃王妃王妃务局负责 等废弃物王妃王妃王妃 务局负责 等废弃物王v妃王妃王妃 务局负责 等废</p>-->
                    <!--<p class="time">15分钟前</p>-->
                <!--</div>-->
              <!--</div>-->
          <!--</li>-->

          <!--<li>-->
              <!--<p class="pram">上证指数减肥税务局负责 等废弃物王妃王妃王妃务局负责 等废弃物王妃王妃王妃 务局负责 等废弃物王v妃王妃王妃 务局负责 等废</p>-->
              <!--<div class="personInfo">-->
                <!--<a href="#" class="img"><img src="../images/peo.png" /></a>-->
                <!--<div class="des">-->
                    <!--<h3>唐老师</h3>-->
                    <!--<p class="identity">巅峰财富|策略分析师</p>-->
                    <!--<div class="status">-->
                       <!--<a href="javascript:;" class="vbtn viewbtn3">点击查看</a>-->
                    <!--</div>-->
                <!--</div>-->
              <!--</div>-->
          <!--</li>-->
      </ul>
   </div>
  
   <!-- 查看信息 -->
   <div class="fixbottomBox fixbottomInfo" style="display:none">
       <div class="bg"></div>
       <div class="cont">
           <span class="closed"></span>
           <div class="personInfo">
              <a href="#" class="img" ><img src="../images/peo.png"  id="infohead"/></a>
              <div class="des">
                  <h3 id="infoName"></h3>
                  <p class="identity" id="infoTeam">巅峰财富|策略分析师</p>
                  <div class="showpic"><img src="../images/temp.jpg" id="infoimg" /></div>
                  <p class="pram" id="infoContent">
                  </p>
              </div>
            </div>
        </div>
   </div>
   <!-- 登录 -->
   <div class="fixbottomBox fixbottomLogin" style="display:none">
       <div class="bg"></div>
       <div class="cont">
          <span class="closed"></span>
          <div class="btn"><a href="#">登录</a> <a href="#">注册</a></div>
          <h4>第三方登录</h4>
          <div class="thirdLogin">
             <a href="#" class="a1"><span></span>微博</a>
             <a href="#" class="a2"><span></span>微信</a>
             <a href="#" class="a3"><span></span>QQ</a>
          </div>
       </div>
   </div>

   <!-- 支付 -->
   <!-- <div class="fixbottomBox fixbottomPay" style="display:none">
       <div class="bg"></div>
       <div class="cont">
          <span class="closed"></span>
          <h4>使用u比支付</h4>
          <p>您将支付N枚U币用于旁听该问题回答，请确认支付。</p>
          <div class="btn"><a href="#" class="cfbtn">确认</a><a href="#">取消</a></div>
       </div>
   </div> -->
<script src="../js/zepto.min.js"></script>
<script src="../js/all.js"></script>
   <script src="../js/response.js"></script>
<script type="text/javascript">

$(function () {
//        $('.personInfo .info').tap(function () {
//            setTimeout(function () {
//                animateshowHide($('.fixbottomInfo .bg'));
//            }, 320);
//            return false;
//        });
//
//        $('.personInfo .viewbtn2').tap(function () {
//            setTimeout(function () {
//                animateshowHide($('.fixbottomLogin .bg'));
//            }, 320);
//            return false;
//        });
//
//        $('.personInfo .nopay').tap(function () {
//            setTimeout(function () {
//                animateshowHide($('.fixbottomPay .bg'));
//            }, 320);
//            return false;
//        });
        $('.dalist').on('click', '.personInfo .info', function () {
            var answerId = this.id;
            var ev = event || window.event;
            console.log(ev.srcElement);
            $.ajax({
                type: 'POST',
                url: '/question/detail',
                data: {answerId: answerId},
                dataType: 'json',
                timeout: 1000,
                success: function (data) {
                    var json = data.data;
                    for (var i = 0; i < json.length; i++) {
                        $('#infoName').html(json[i].user_name);
                        $('#infoTeam').html(json[i].user_name);
                        $('#infoContent').html(json[i].content);
                        $('#infohead').attr("src", json[i].fileurl);
                        $('#infoimg').attr("src", json[i].fileurl);
                    }
                    //返回的数据为空的情况
                    //后台做验证
                    //此时可能是未付款，或者未登录
                    if (json.length == 0) {
                        //未登录
                        if (data.message == '未登录') {
                            animateshowHide($('.fixbottomLogin .bg'));
                        }
                        else if (data.message == '未付款') {
                            animateshowHide($('.fixbottomPay .bg'));
                        }
                    }
                    else {
                        animateshowHide($('.fixbottomInfo .bg'));
                    }
                    return false;
                },
                error: function (xhr, type) {
                    alert('Ajax error!');
                }
            });
            if (ev.stopPropagation)
                ev.stopPropagation();
            else
                ev.cancelBubble = true;
            return false;
            return false;
        });

        // $('.dalist').on('click', '.personInfo .noPay', function () {
        //     var id = '#' + this.id;
        //     var answerId = this.id;
        //     var html = $(id).html();
        //     html = html.substr(0, html.length - 6);
        //     var str = '您将支付' + html + '枚U币用于旁听该问题回答，请确认支付。';
        //     $('#payContent').html(str);
        //     $('#goPay').attr('onclick', 'pay(' + answerId + ')');
        //     animateshowHide($('.fixbottomPay .bg'));
        //     return false;
        // });
        $('.dalist').on('click', '.personInfo .play', function () {
            alert('play');
            return false;
        });
        $('.dalist').on('click', '.myli', function () {
            var ev = event || window.event;
            var dom = ev.srcElement;
            if (!$(dom).hasClass("vbtn") && !$(dom).hasClass("play") && $(dom)[0].localName != 'img') {
                window.location.href = '/apk/submitanswer.html?answerId='+this.attributes.data.value;
                return false;
            }
            return true;
        });

        //请求数据，获得我答
        $.ajax({
            type: 'POST',
            url: '/user/iresponse',
            data: {
          },
            dataType: 'json',
            timeout: 2000,
            success: function (data) {
                var code = data.code;
                if (code == 0) {
                    var result = data.data;
                    var action = '';
                    for (var i = 0; i < result.length; i++) {
                        //state:   0： 有答案
                        //         1： 未回答
                        //         2： 已过期

                        //play:  已付钱可以播放
                        //info:  已付钱可以查看
                        //noPay: 未付钱
                        var html = '';
                        if (result[i].state == 0) {
                            // 是否已经付钱
                            // 1: 已经付过钱了  0: 还没付钱
                            if (result[i].payment == 1) {
                                if (result[i].type == 1) {
                                    action = 'play';
                                }
                                else {
                                    action = 'info';
                                }
                            }
                            else {
                                action = 'noPay';
                            }
                            //是否是图文 type:0 图文 , 1: 录音
                            if (action == 'play') {
                                html += '<li data="('+result[i].answerId+')" class="myli" state="0">';
//                                html += '<li>';
                                html += '<p class="pram">' + result[i].content + '</p>';
                                html += '<div class="personInfo">';
                                html += '<a href="/apk/ask.html?id=' + result[i].answerut + '" class="img"><img src="' + result[i].answerUserImg + '" /></a>';
                                html += '<div class="des">';
                                html += '<h3>' + result[i].userName + '</h3>';
                                html += '<p class="identity">巅峰财富|策略分析师</p>';
                                html += '<div class="status">';
                                html += '<span class="play"><i></i>点击播放</span> 14 \'\'';
                                html += '</div>';
                                html += '<p class="time">' + result[i].time + '</p>';
                                html += '</div>';
                                html += '</div>';
                                html += '</li>';
                            }
                            else {
                                html += '<li class="myli" data="'+result[i].answerId+'"  state="0">';
//                                html += '<li>';
                                html += '<p class="pram">' + result[i].content + '</p>';
                                html += '<div class="personInfo">';
                                html += '<a href="/apk/ask.html?id=' + result[i].answerut + '" class="img"><img src="' + result[i].answerUserImg + '"/></a>';
                                html += '<div class="des">';
                                html += '<h3>' + result[i].userName + '</h3>';
                                html += '<p class="identity">巅峰财富|策略分析师</p>';
                                html += '<div class="status">';
                                html += '<a href="javascript:;" class="vbtn ' + action + '" id="'+result[i].answerId+'">点击查看</a>';
                                html += '</div>';
                                html += '<p class="time">' + result[i].time + '</p>';
                                html += '</div>';
                                html += '</div>';
                                html += '</li>';
                            }
                        }
                        //未过期
                        else if (result[i].state == 1) {
                            html += '<li state="0" class="myli" data="'+result[i].id+'">';
                            html += '<div class="personInfo">';
                            html += '<a href="#" class="img"><img src="' + result[i].userImg + '"/></a>';
                            html += '<div class="des">';
                            html += '<h3>' + result[i].userName + '</h3>';
                            html += '<p class="identity"><span class="state">待回答</span>巅峰财富|策略分析师</p>';
                            html += '<p class="pram">' + result[i].content + '</p>';
                            html += '<p class="time">' + result[i].time + '</p>';
                            html += '</div>';
                            html += '</div>';
                            html += '</li>';
                        }
                        //已过期
                        else if (result[i].state == 2) {
                            html += '<li>';
                            html += '<div class="personInfo">';
                            html += '<a href="/apk/ask.html?id=' + result[i].ut + '" class="img"><img src="../images/peo.png"/></a>';
                            html += '<div class="des">';
                            html += '<h3>'+result[i].userName+'</h3>';
                            html += '<p class="identity"><span class="state overstate">已过期</span>巅峰财富|策略分析师</p>';
                            html += '<p class="pram">'+result[i].content+'</p>';
                            html += '<p class="time">'+result[i].time+'</p>';
                            html += '</div>';
                            html += '</div>';
                            html += '</li>';
                        }
                        $("#myul").append(html);
                    }
                }
                else {
                    alert(data.message);
                }
            },
            error: function (xhr, type) {
                alert('Ajax error!')
            }
        })
    });



    // function intent(state, id) {
    //     //跳到问答详情
    //     if(state == 1){
    //         window.location.href = '/apk/questionDetail.html?answerId='+id;
    //     }
    //     //跳到提交答案页面
    //     if(state == 2){
    //         window.location.href = '/apk/submitanswer.html?id='+id;
    //     }
    // }


//  $(function(){
//      $('.personInfo .viewbtn1').tap(function(){
//         setTimeout(function(){
//            animateshowHide($('.fixbottomInfo .bg'));
//         },320);
//         return false;
//      });

//      $('.personInfo .viewbtn2').tap(function(){
//         setTimeout(function(){
//            animateshowHide($('.fixbottomLogin .bg'));
//         },320);
//         return false;
//      });

//      $('.personInfo .viewbtn3').tap(function(){
//         setTimeout(function(){
//            animateshowHide($('.fixbottomPay .bg'));
//         },320);
//         return false;
//      });

//      $('.dalist').on('click', '.personInfo .info', function () {
// //
//          var answerId = this.id;
//          $.ajax({
//              type: 'POST',
//              url: '/question/detail',
//              data: {answerId: answerId},
//              dataType: 'json',
//              timeout: 1000,
//              success: function (data) {
//                  var json = data.data;
//                  for (var i = 0; i < json.length; i++) {
//                      $('#infoName').html(json[i].user_name);
//                      $('#infoTeam').html(json[i].user_name);
//                      $('#infoContent').html(json[i].content);
//                      $('#infohead').attr("src", json[i].fileurl);
//                      $('#infoimg').attr("src", json[i].fileurl);
//                  }
//                  //返回的数据为空的情况
//                  //后台做验证
//                  //此时可能是未付款，或者未登录
//                  if (json.length == 0) {
//                      //未登录
//                      if (data.message == '未登录') {
//                          animateshowHide($('.fixbottomLogin .bg'));
//                      }
//                      else if (data.message == '未付款') {
//                          animateshowHide($('.fixbottomPay .bg'));
//                      }
//                  }
//                  else {
//                      animateshowHide($('.fixbottomInfo .bg'));
//                  }
//              },
//              error: function (xhr, type) {
//                  alert('Ajax error!')
//              }
//          });
//          return false;
//      });

//      $('.dalist').on('click', '.personInfo .noPay', function () {
//          animateshowHide($('.fixbottomPay .bg'));
//          return false;
//      });
//      $('.dalist').on('click', '.personInfo .play', function () {
//          alert('play');
//          return false;
//      });

//      //请求数据，获得我答
//      $.ajax({
//          type: 'POST',
//          url: '/user/iresponse',
//          data: {},
//          dataType: 'json',
//          timeout: 2000,
//          success: function (data) {
//              var code = data.code;
//              if (code == 0) {
//                  var result = data.data;
//                  var action = '';
//                  for (var i = 0; i < result.length; i++) {
//                      //state:   0： 有答案
//                      //         1： 未回答
//                      //         2： 已过期

//                      //play:  已付钱可以播放
//                      //info:  已付钱可以查看
//                      //noPay: 未付钱
//                      var html = '';
//                      if (result[i].state == 0) {
//                          // 是否已经付钱
//                          // 1: 已经付过钱了  0: 还没付钱
//                          if (result[i].payment == 1) {
//                              if (result[i].type == 1) {
//                                  action = 'play';
//                              }
//                              else {
//                                  action = 'info';
//                              }
//                          }
//                          else {
//                              action = 'noPay';
//                          }
//                          //是否是图文 type:0 图文 , 1: 录音
//                          if (action == 'play') {
//                              html += '<li>';
//                              html += '<p class="pram">' + result[i].content + '</p>';
//                              html += '<div class="personInfo">';
//                              html += '<a href="#" class="img"><img src="' + result[i].answerUserImg + '" /></a>';
//                              html += '<div class="des">';
//                              html += '<h3>' + result[i].answerUserName + '</h3>';
//                              html += '<p class="identity">巅峰财富|策略分析师</p>';
//                              html += '<div class="status">';
//                              html += '<span class="play" id="'+result[i].answerid+'"><i></i>点击播放</span> 14 \'\'';
//                              html += '</div>';
//                              html += '<p class="time">' + result[i].time + '</p>';
//                              html += '</div>';
//                              html += '</div>';
//                              html += '</li>';
//                          }
//                          else {
//                              html += '<li>';
//                              html += '<p class="pram">' + result[i].content + '</p>';
//                              html += '<div class="personInfo">';
//                              html += '<a href="#" class="img"><img src="' + result[i].answerUserImg + '"/></a>';
//                              html += '<div class="des">';
//                              html += '<h3>' + result[i].answerUserName + '</h3>';
//                              html += '<p class="identity">巅峰财富|策略分析师</p>';
//                              html += '<div class="status">';
//                              html += '<a href="javascript:;" class="vbtn ' + action + ' " id = ' + result[i].answerid + '">点击查看</a>';
//                              html += '</div>';
//                              html += '<p class="time">' + result[i].time + '</p>';
//                              html += '</div>';
//                              html += '</div>';
//                              html += '</li>';
//                          }
//                      }
//                      //未过期
//                      else if (result[i].state == 1) {
//                          html += '<li>';
//                          html += '<div class="personInfo">';
//                          html += '<a href="#" class="img"><img src="' + result[i].userImg + '"/></a>';
//                          html += '<div class="des">';
//                          html += '<h3>' + result[i].userName + '</h3>';
//                          html += '<p class="identity"><span class="state">待回答</span>巅峰财富|策略分析师</p>';
//                          html += '<p class="pram">' + result[i].content + '</p>';
//                          html += '<p class="time">' + result[i].time + '</p>';
//                          html += '</div>';
//                          html += '</div>';
//                          html += '</li>';
//                      }
//                      //已过期
//                      else if (result[i].state == 2) {
//                          html += '<li>';
//                          html += '<div class="personInfo">';
//                          html += '<a href="#" class="img"><img src="'+result[i].userImg+'"/></a>';
//                          html += '<div class="des">';
//                          html += '<h3>'+result[i].userName+'</h3>';
//                          html += '<p class="identity"><span class="state overstate">已过期</span>巅峰财富|策略分析师</p>';
//                          html += '<p class="pram">'+result[i].content+'</p>';
//                          html += '<p class="time">'+result[i].time+'</p>';
//                          html += '</div>';
//                          html += '</div>';
//                          html += '</li>';
//                      }
//                      $("#myul").append(html);
//                  }
//              }
//              else {
//                  alert(data.message);
//              }
//          },
//          error: function (xhr, type) {
//              alert('Ajax error!')
//          }
//      })
//  })
</script>
</body>
</html>

